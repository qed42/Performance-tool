{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["(function ($, _, Drupal) {\n  Drupal.behaviors.general = {\n    attach: _.once(function (context) {\n      // General JS code goes here\n       if ($('.quicktabs-wrapper').length > 0) {\n        const $tabLinks = $('li[id^=\"quicktabs-tab\"] a');\n    \n        $tabLinks.on('contextmenu', function (e) {\n          e.preventDefault();\n          this.blur();\n        });\n      }\n    })\n  };\n\n  Drupal.behaviors.themeToast = {\n    attach: function () {\n      if ($(\".toast\").length > 0) {\n        $('.toast').toast('show');\n        $('.toast').toast({ 'delay': 6000 });\n      }\n    }\n  }\n\n  Drupal.behaviors.parallax = {\n    attach: _.once(function (context) {\n      if ($(\".parallax-image .field--type-image .image-container img\").length > 0) {\n        new Rellax('.parallax-image .field--type-image .image-container img', {\n          speed: -2,\n          center: true,\n          min: 0,\n          max: 60,\n          stopPoint: 'sm',\n          scale: 1.2,\n          mapBreakpoints: {\n            'xs': 568,\n            'sm': 768,\n            'md': 968,\n            'lg': 1200\n          }\n        });\n      }\n\n      if ($(\".hero-parallax\").length > 0) {\n        new Rellax('.hero-parallax', {\n          speed: -2,\n          center: true,\n          min: 0,\n          max: 60,\n          stopPoint: 'sm',\n          scale: 1.2,\n          mapBreakpoints: {\n            'xs': 568,\n            'sm': 768,\n            'md': 968,\n            'lg': 1200\n          }\n        });\n      }\n    })\n  }\n\n  Drupal.behaviors.headerNavBar = {\n    attach: _.once(function (context) {\n      $('#header-search').on('click', function (e) {\n        e.preventDefault();\n        $(this).closest('.search').find('.js-form-item').append('<span class=\"input-border\"></span>');\n        $(this).closest('.search').toggleClass('active');\n        $(this).closest('.region-navbar').toggleClass('active');\n        $(this).closest('.search').find('input[type=text]').focus();\n        setTimeout(function () {\n          $('.search .js-form-item .input-border').addClass('input-border-transition');\n        }, 1);\n      });\n\n      $('#header-search-close').on('click', function () {\n        $(this).closest('.search').find('input[type=text]').val('');\n        $(this).closest('.search').find('.js-form-item span').remove();\n        $(this).closest('.search').removeClass('active');\n        $(this).closest('.region-navbar').removeClass('active');\n        $('#header-search').focus();\n      });\n\n      $(document).on('keyup', function (e) {\n        e.preventDefault();\n        if ((e.keyCode == 27) && $('.search').hasClass('active')) {\n          $('.search').find('input[type=text]').val('');\n        }\n      });\n\n      $('#form-active-submit').on('click', function (e) {\n        document.getElementById(\"views-exposed-form-search-content-page-1\").submit();\n      });\n\n      $('#toggle-menu').on('click', function (e) {\n        e.preventDefault();\n        $(this).toggleClass('icon-close');\n        $(this).closest('header').toggleClass('open-navbar');\n        if ($(this).closest('header').hasClass('open-navbar')) {\n          $('.top-header__wrapper').appendTo('.region-navbar');\n        } else {\n          $('.top-header__wrapper').appendTo('.region-top-bar');\n        }\n        $(\"body\").toggleClass(\"no-scroll\");\n      });\n\n      $('.header--main-menu .tb-megamenu ul.level-0 li.tb-megamenu-item').on('click', function (e) {\n        $(this).closest('div').find('.tb-megamenu-submenu').not(this).removeClass('active');\n        $(this).toggleClass('active');\n      });\n\n      $(window).on('resize', function () {\n        if (window.innerWidth < 1180 && $('.region-navbar').find('.top-header__wrapper').length > 0) {\n          $('.top-header__wrapper').appendTo('.region-top-bar');\n          $('.header--main-menu').removeClass('open-navbar');\n          $('#toggle-menu').removeClass('icon-close');\n        }\n      });\n    })\n  };\n\n  Drupal.behaviors.ctaCarousel = {\n    attach: _.once(function (context) {\n      let swiperCTACarousel = [];\n      $('.paragraph--type--cta-carousel .swiper-container').each(function (index, element) {\n        const $this = $(this);\n        $this.addClass('instance-' + index);\n\n        $this.closest('.cardCarousel_container').find('.swiper-button-prev').addClass('button-prev-' + index);\n\n        $this.closest('.cardCarousel_container').find('.swiper-button-next').addClass('button-next-' + index);\n\n        swiperCTACarousel[index] = new Swiper('.instance-' + index, {\n          slidesPerView: 5.5,\n          slidesPerGroup: 4,\n          spaceBetween: 5,\n          speed: 700,\n          freeMode: true,\n          breakpoints: {\n            280: {\n              slidesPerView: 1.5,\n              slidesPerGroup: 1,\n              spaceBetween: 5,\n              grabCursor: true,\n            },\n            320: {\n              slidesPerView: 1.5,\n              slidesPerGroup: 1,\n              spaceBetween: 5,\n              grabCursor: true,\n            },\n            420: {\n              slidesPerView: 2.5,\n              slidesPerGroup: 2,\n              spaceBetween: 5,\n              grabCursor: true,\n            },\n            550: {\n              slidesPerView: 2.5,\n              slidesPerGroup: 2,\n              spaceBetween: 5,\n              grabCursor: true,\n            },\n            680: {\n              slidesPerView: 3,\n              slidesPerGroup: 3,\n              spaceBetween: 5,\n            },\n            1140: {\n              slidesPerView: 4.5,\n              slidesPerGroup: 4,\n              spaceBetween: 5,\n            }\n          },\n          navigation: {\n            nextEl: '.button-next-' + index,\n            prevEl: '.button-prev-' + index\n          }\n        });\n\n      });\n\n      $(window).on('resize', function () {\n        $('.paragraph--type--cta-carousel .swiper-container').each(function (index, element) {\n          swiperCTACarousel[index].update();\n        });\n      });\n    })\n  };\n\n  Drupal.behaviors.contentCardsCarousel = {\n    attach: _.once(function (context) {\n      if ($(\".paragraph--type--content-carousel\").length > 0) {\n        $('.paragraph--type--content-carousel').each(function (index, element) {\n          const itemsPerView = $(this).find('.js-items-per-view').text();\n          if (itemsPerView > 2) {\n            let swiperCards = [];\n            const $this = $(this).find('.swiper-container');\n            $this.addClass('cards-' + index);\n            $this.closest('.cards_container').find('.swiper-button-prev').addClass('button-prevCard-' + index);\n            $this.closest('.cards_container').find('.swiper-button-next').addClass('button-nextCard-' + index);\n            swiperCards[index] = new Swiper('.cards-' + index, {\n              slidesPerView: 4,\n              spaceBetween: 32,\n              slidesPerGroup: 1,\n              freeMode: true,\n              simulateTouch: true,\n              breakpoints: {\n                10: {\n                  slidesPerView: 1.33,\n                  spaceBetween: 32,\n                  grabCursor: true,\n                },\n                680: {\n                  slidesPerView: 4,\n                  slidesPerView: itemsPerView,\n                  spaceBetween: 32,\n                }\n              },\n              navigation: {\n                nextEl: '.button-nextCard-' + index,\n                prevEl: '.button-prevCard-' + index\n              },\n              scrollbar: {\n                el: '.swiper-scrollbar',\n                draggable: true\n              }\n            });\n\n            $(window).on('resize', function () {\n              swiperCards[index].update();\n            });\n          }\n        });\n      }\n    })\n  };\n\n  Drupal.behaviors.carouselTimeline = {\n    attach: _.once(function (context) {\n      let swiperTimeLine = [];\n      $('.swiper-container-timeLine').each(function (index, element) {\n        const $this = $(this);\n\n        $this.addClass('timeLine-' + index);\n        $this.closest('.timeLine-container').find('.swiper-button-prev').addClass('timeLine-prevCard-' + index);\n        $this.closest('.timeLine-container').find('.swiper-button-next').addClass('timeLine-nextCard-' + index);\n        $this.closest('.timeLine-container').find('.swiper-pagination').addClass('pagination-' + index);\n\n        swiperTimeLine[index] = new Swiper('.timeLine-' + index, {\n          slidesPerView: 1,\n          slidesPerGroup: 1,\n          spaceBetween: 5,\n          freeMode: true,\n          simulateTouch: true,\n          navigation: {\n            nextEl: '.timeLine-nextCard-' + index,\n            prevEl: '.timeLine-prevCard-' + index\n          },\n          pagination: {\n            el: '.pagination-' + index,\n            clickable: true,\n            renderBullet: function (paginationIndex, className) {\n              return ('<span class=\"' + className + '\" bulletId=\"' + paginationIndex + '\">' + (paginationIndex + 1) + '</span>');\n            }\n          }\n        });\n\n        Drupal.behaviors.carouselTimeline.drawTimeLineSwiper(this, swiperTimeLine, index);\n      });\n    }),\n\n    drawTimeLineSwiper: function (param, swiperIn, num) {\n      const $this = $(param);\n\n      let $timeLineContainer = $this.closest('.timeLine-container');\n      var $eventSelect = $timeLineContainer.find('.timeLine-select');\n\n      $eventSelect.select2({\n        closeOnSelect: true,\n        width: '100%',\n        minimumResultsForSearch: -1\n      });\n\n      $eventSelect.on('select2:select', function (e) {\n        let valueText = e.target.value;\n        const slidesList = [\n          ...$(e.target).closest('.timeLine-container').find('.swiper-slide')\n        ];\n        const activeIndex = slidesList.findIndex(item => {\n          const slideText = $(item).attr('value');\n          return slideText === valueText;\n        });\n\n        swiperIn[num].slideTo(activeIndex, 1000, true);\n        $eventSelect.val(valueText).trigger('change');\n        swiperIn[num].update();\n\n        return true;\n      });\n\n      swiperIn[num].on('paginationUpdate', () => {\n        let activeTextLine = $timeLineContainer.find('.swiper-pagination-bullet-active').attr('bullet-label');\n        $eventSelect.val(activeTextLine).trigger('change');\n      });\n\n      const $bullets = $timeLineContainer.find('.swiper-pagination-bullet');\n      $bullets.map((item, bulletItem) => {\n        const bulletPageItem = $timeLineContainer.find('.pagination-title[bullet=' + item + ']').first();\n\n        if (bulletPageItem) {\n          const swiperBullet = $timeLineContainer.find('.swiper-pagination-bullet[bulletId=' + item + ']').first();\n          $(swiperBullet).attr('bullet-label', bulletPageItem.text());\n        }\n      });\n    }\n  };\n\n  Drupal.behaviors.imageSlideshow = {\n    attach: _.once(function (context) {\n      if ($(\".gallery-top\").length > 0) {\n        var galleryTop = new Swiper('.gallery-top', {\n          slidesPerView: 1,\n          loop: true,\n          loopedSlides: 7,\n          autoplay: {\n            delay: 5000\n          },\n          navigation: {\n            nextEl: '.swiper-button-next',\n            prevEl: '.swiper-button-prev'\n          }\n        });\n      }\n\n      if ($(\".gallery-thumbs\").length > 0) {\n        var galleryThumbs = new Swiper('.gallery-thumbs', {\n          spaceBetween: 32,\n          slidesPerView: 5,\n          centeredSlides: true,\n          slideToClickedSlide: true,\n          loop: true,\n          loopedSlides: 10,\n          breakpoints: {\n            0: {\n              spaceBetween: 10,\n              slidesPerView: 3.3,\n            },\n            680: {\n              slidesPerView: 4.5,\n              spaceBetween: 16,\n            },\n            900: {\n              slidesPerView: 5,\n              spaceBetween: 32,\n            },\n          }\n        });\n      }\n\n      if (galleryTop || galleryThumbs) {\n        galleryTop.controller.control = galleryThumbs;\n        galleryThumbs.controller.control = galleryTop;\n\n        $(window).on('resize', function () {\n          galleryTop.update();\n          galleryThumbs.update();\n        });\n      }\n    })\n  };\n\n  Drupal.behaviors.storyNavigation = {\n    attach: _.once(function (context) {\n      let navSelect = $('.paragraph--story-navigation--select-wrap #menu--story');\n\n      navSelect.select2({\n        closeOnSelect: true,\n        width: '100%',\n        minimumResultsForSearch: -1\n      });\n\n      navSelect.on('change', function () {\n        let targetPosition = $($(this).val()).offset().top;\n\n        if ($('#toolbar-bar').length) {\n          var toolbar = $('#toolbar-bar').height();\n        } else {\n          var toolbar = 0;\n        }\n\n        if ($('#toolbar-bar .toolbar-tray.is-active').length) {\n          var toolbarActive = $('#toolbar-bar .toolbar-tray.is-active').height();\n        } else {\n          var toolbarActive = 0;\n        }\n\n        $('html,body').animate({ scrollTop: targetPosition - toolbar - toolbarActive - 35 }, 2000);\n        $($(this).val('#0').trigger('change.select2'));\n      });\n\n      navSelect.on('select2:opening', function (e) {\n        $(e.target).data(\"select2\").$dropdown.addClass('navigation-dropdown__open');\n      });\n\n      const sections = document.querySelectorAll('section[data-title=\"true\"]');\n\n      function changeLinkState() {\n        let index = sections.length; // Get amount of sections with a title\n        while (--index && window.scrollY + 35 < sections[index].offsetTop) { }\n\n        let allSectionHeight = $('.paragraph-list').height();\n        let onePercentOfAllSection = allSectionHeight / 100;\n        let headerOffsetTop = $('.paragraph-list').offset().top;\n        let percentage = (window.scrollY - headerOffsetTop) / onePercentOfAllSection + 10;\n\n        $('.progressive-bar').css('width', percentage + '%');\n      }\n\n      $(window).scroll(function () {\n        if ($('.paragraph-list').length > 0) {\n          if (navSelect.length && sections.length) { changeLinkState(); }\n\n          let scrollTop = $(window).scrollTop(),\n            elementOffset = $('.paragraph-list').offset().top,\n            distance = elementOffset - scrollTop;\n\n          if (distance <= 0) {\n            $('.paragraph--story-navigation').addClass('display-navigation');\n          }\n\n          if (distance > 70) {\n            $('.paragraph--story-navigation').removeClass('display-navigation');\n          }\n        }\n      });\n    })\n  };\n\n  Drupal.behaviors.videoJS = {\n    attach: _.once(function (context) {\n      $(\".vjs-theme-fantasy\").each(function () {\n        let titleOverlayOptions = {\n          title: $(this).find('.video-title').text()\n        }\n        let video_player = videojs($(this).attr('id'), {\n          controlBar: {\n            volumePanel: {\n              inline: false,\n              volumeControl: {\n                vertical: true\n              }\n            }\n          }\n        });\n        video_player.titleoverlay(titleOverlayOptions);\n        video_player.titleoverlay.hideOverlay();\n      });\n    })\n  };\n\n  Drupal.behaviors.audioJS = {\n    attach: _.once(function (context) {\n      if ($('.vjs-audio-player').length > 0) {\n        $('.vjs-audio-player').each(function () {\n          let titleOverlayOptions = {\n            title: $(this).find('.audio-title').text()\n          }\n          let audio_player = videojs($(this).attr('id'), {\n            controlBar: {\n              volumePanel: {\n                inline: false,\n                volumeControl: {\n                  vertical: true\n                }\n              }\n            }\n          });\n          audio_player.titleoverlay(titleOverlayOptions);\n          audio_player.titleoverlay.showOverlay();\n        });\n      }\n    })\n  };\n\n  Drupal.behaviors.aosAnimation = {\n    attach: _.once(function (context, settings) {\n      if($('[data-aos]', context).length > 0) {\n        AOS.init({\n          once: true,\n          duration: 1200,\n        });\n      }\n    })\n  };\n\n  Drupal.behaviors.unwsubsectionMenu = {\n    attach: _.once(function (context, settings) {\n      if ($('.submeniu ').length > 0) {\n        $('.submeniu .dropdown-toggle-wrapper > i', context).click(function (e) {\n          $(this).next('ul').slideToggle('slow', 'swing', function () {\n            // On slideToggle complete.\n            if ($(this).is(':visible')) {\n              $(this).parent().addClass('open').removeClass('closed');\n            }\n            else {\n              $(this).parent().addClass('closed').removeClass('open');\n            }\n          });\n        });\n      }\n    })\n  };\n  Drupal.behaviors.palyVideoHoverEffect = {\n    attach: _.once(function (context) {\n      var figure = $(\"article.node--view-mode-teaser.has-video\");\n      figure.hover(hoverVideo, hideVideo);\n\n      function hoverVideo(e) {\n        $('video', this).get(0).play();\n      }\n\n      function hideVideo(e) {\n        $('video', this).get(0).pause();\n      }\n    })\n  };\n  Drupal.behaviors.submenuSectionFixScroll = {\n    attach: (function (context) {\n      $(window).scroll(function () {\n        var navHeight = $('.header--main-menu').height();\n        if ($(window).scrollTop() > navHeight) {\n          $('.menu-top-fixed').addClass('fixed');\n        }\n        else {\n          $('.menu-top-fixed').removeClass('fixed');\n        }\n      });\n    })\n  };\n  Drupal.behaviors.sidebarSectionFixScroll = {\n    attach: (function (context) {\n      $(function () {\n        if($('.sidebar').length) {\n          var top = $('.sidebar').offset().top - parseFloat($('.sidebar').css('marginTop').replace(/auto/, 0));\n        }\n        if($('.page__footer').length) {\n          var footTop = $('.page__footer').offset().top - parseFloat($('.page__footer').css('marginTop').replace(/auto/, 0));\n        }\n        \n        \n\n        var maxY = footTop - $('.sidebar').outerHeight();\n        var threshold = 161;\n        $(window).scroll(function (evt) {\n          var y = $(this).scrollTop();\n          if (y + 20 >= top) {\n            if (y + threshold < maxY) {\n              $('.sidebar').addClass('fixed-sidebar').removeClass('bottom-fix');\n            } else {\n              $('.sidebar').addClass('bottom-fix').removeClass('fixed-sidebar');\n            }\n          } else {\n            $('.sidebar').removeClass('fixed-sidebar bottom-fix');\n          }\n        });\n      });\n    })\n  };\n  \n  Drupal.behaviors.backtotop = {\n    attach: _.once(function (context, settings) {\n      $(window).scroll(function () {\n        if ($(this).scrollTop() > 500) {\n          $('.scroll-top').fadeIn();\n        } else {\n          $('.scroll-top').fadeOut();\n        }\n      });\n\n      $('.scroll-top').on('click', function () {\n        $('html, body').bind('scroll mousedown DOMMouseScroll mousewheel keyup', function () {\n          $('html, body').stop();\n        });\n\n        $('html, body').animate({ scrollTop: 0 }, 200);\n      });\n    })\n  };\n\n  Drupal.behaviors.increaseDropdownWidth = {\n    attach: function (context) {\n      if(window.location.href.indexOf('/jobs/unwomen') != -1 && window.innerWidth > 1179) {\n        $(\"body\").once().on(\"click\", \".select2-selection\", function() {\n          setTimeout( function() {\n            $('span.select2-container--open:not(.select2) .select2-dropdown').css('width', '300px');\n          }, 50);\n        });\n      }\n    },\n  };\n})(jQuery, _, Drupal);\n"],"file":"../script.js"}