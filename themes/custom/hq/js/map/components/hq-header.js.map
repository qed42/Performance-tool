{"version":3,"names":[],"mappings":"","sources":["components/hq-header.js"],"sourcesContent":["(function($, _, Drupal) {\n  Drupal.behaviors.hqHeader = {\n    attach: _.once(function(context) {\n      let resizeId;\n      $('.hq-navbar .has-block .dropdown-toggle').on('click', e => {\n        const target = $(e.target);\n        const subMenu = target.closest('.menu-item--expanded');\n        let placeholderText = Drupal.t('Search countries...');\n        if (subMenu.find('.unw-knowledge-country-form').length) {\n          setTimeout(() => {\n            if (subMenu.hasClass('show')) {\n              $('.unw-kp-country').select2('open').data('select2').$dropdown.addClass('unw-kp-country__open');\n              $('.select2-container--open').find('input').attr('placeholder', placeholderText);\n            } else {\n              $('.unw-kp-country').select2('close');\n              target.focus();\n            }\n          }, 10);\n        }\n      });\n\n      $('.hq-navbar .menu-item--expanded.dropdown').on('hide.bs.dropdown', e => {\n        if ($('.unw-kp-country__open').length && e.clickEvent) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      });\n\n      $('.hq-hamburger__wrapper').on('hide.bs.collapse', e => {\n        if ($('.unw-kp-country__open').length) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      });\n\n      $('.unw-kp-country').on(\"select2:close\", e => {\n        setTimeout(function() {\n            $('.hq-navbar .menu-item--expanded.dropdown.has-block a').dropdown('hide');\n            $('.hq-navbar .menu-item--expanded.dropdown.has-block a').focus();\n        }, 100);\n      });\n\n      $('.unw-kp-country').on('select2:open', () => {\n        setTimeout(() => {\n          let currentInput = document.querySelectorAll('.select2-container--open .select2-search__field');\n          currentInput[0].focus();\n        }, 100);\n      });\n\n      function setMegamenu() {\n        if (window.innerWidth <= 1180) {\n          $('header').find('.hq-header-search').appendTo('.hq-search__content');\n          $('.top-header__wrapper').appendTo('.hq-hamburger__content');\n          if ($('.region-sub-navbar').length) {\n            $('.thematic-menu__item.expanded').addClass('dropdown');\n            $('.thematic-menu__item.expanded').find('.dropdown-menu').removeClass('show');\n            $('.region-sub-navbar').prependTo('.hq-hamburger__content');\n          }\n          const $menuCollapseGroup = $('.hq-main-menu__content');\n          $menuCollapseGroup.on('show.bs.collapse', '.collapse', function() {\n            $menuCollapseGroup.find('.collapse.show').collapse('hide');\n          });\n          $menuCollapseGroup.on('hidden.bs.collapse', '.collapse', function() {\n            if ($menuCollapseGroup.find('.collapse.show').length) {\n              $('body').addClass('stop-scrolling');\n            } else {\n              $('body').removeClass('stop-scrolling');\n            }\n          });\n          $menuCollapseGroup.on('shown.bs.collapse', '.collapse', function() {\n            $('body').addClass('stop-scrolling');\n          });\n        } else {\n          if ($('.hq-search__content').find('.hq-header-search').length) {\n            $('.hq-search__content').find('.hq-header-search').appendTo('.hq-main-menu__content');\n          }\n          if ($('.hq-hamburger__content').find('.top-header__wrapper').length) {\n            $('.hq-hamburger__content').find('.top-header__wrapper').appendTo('.region-top-bar');\n          }\n          if ($('.hq-hamburger__content').find('.region-sub-navbar').length) {\n            $('.thematic-menu__item.expanded').removeClass('dropdown');\n            $('.thematic-menu__item.expanded').find('.dropdown-menu').addClass('show');\n            $('.hq-hamburger__content').find('.region-sub-navbar').appendTo('.region-sub-navbar__wrapper .col-12');\n          }\n        }\n      }\n      setMegamenu();\n      $(window).resize(() => {\n        clearTimeout(resizeId);\n        resizeId = setTimeout(() => {\n          setMegamenu();\n        }, 100);\n      });\n    })\n  };\n})(jQuery, _, Drupal);\n"],"file":"../../components/hq-header.js"}