{"version":3,"names":[],"mappings":"","sources":["components/glossary-copy-text.js"],"sourcesContent":["(function ($, _, Drupal, once) {\n  Drupal.behaviors.copyGlossaryText = {\n    attach: function (context, settings) {\n      var copyIcons = $(context).find('.views-field-copy-icon');\n\n      once('copy-glossary-text', '.views-field-copy-icon', context).forEach(function (copyIcon) {\n        $(copyIcon).on('click', function () {\n          var detailsDiv = $(this).prev('.block-glossary-listing--row-details');\n          var htmlContent = getAllHTMLContent(detailsDiv);\n          copyToClipboard(htmlContent);\n          showCopiedMessage($(this));\n        });\n      });\n\n      function getAllHTMLContent(element) {\n        return element.html().trim();\n      }\n\n      function cleanHTMLContent(html) {\n        return html.replace(/\\s\\s+/g, ' ').replace(/\\n/g, '');\n      }\n\n      function copyToClipboard(html) {\n        if (!html) {\n          return;\n        }\n\n        var cleanedHTML = cleanHTMLContent(html);\n\n        if (navigator.clipboard && navigator.clipboard.write) {\n          navigator.clipboard.write([\n            new ClipboardItem({ 'text/html': new Blob([cleanedHTML], { type: 'text/html' }) })\n          ]).catch(function (error) {\n            // Handle error if necessary\n          });\n        } else {\n          // Fallback for browsers that don't support Clipboard API\n          var tempDiv = $('<div>').html(cleanedHTML).css({\n            position: 'absolute',\n            left: '-9999px',\n            top: '0',\n            whiteSpace: 'pre'\n          }).attr('contenteditable', 'true').appendTo('body');\n\n          var range = document.createRange();\n          range.selectNodeContents(tempDiv[0]);\n\n          var selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n\n          try {\n            document.execCommand('copy');\n          } finally {\n            selection.removeAllRanges();\n            tempDiv.remove();\n          }\n        }\n      }\n\n      function showCopiedMessage(copyIconElement) {\n        var copiedButton = $('<div class=\"copied-button\"><span>Copied!</span></div>');\n        copyIconElement.append(copiedButton);\n\n        setTimeout(function () {\n          copiedButton.remove();\n        }, 1000);\n      }\n    }\n  };\n})(jQuery, _, Drupal, once);\n"],"file":"../../components/glossary-copy-text.js"}