{"version":3,"names":[],"mappings":"","sources":["components/globalCardsCarousel.js"],"sourcesContent":["(function($, _, Drupal) {\n  Drupal.behaviors.globalCardsCarousel = {\n    attach: function(context) {\n\n      function setsliderdefaultheight(currentSlider) {\n        let defaultWrapper = currentSlider.find('.global-card__wrapper.default.vm');\n        let defaultWrapperHeight = 0;\n        let hqSlides = currentSlider.find('.swiper-wrapper .swiper-slide');\n        hqSlides.each(function(i) {\n          let image = $(this).find('.global-card__image');\n          let imageHeight = image.height();\n          if (imageHeight > defaultWrapperHeight) {\n            defaultWrapperHeight = imageHeight;\n          }\n        });\n        defaultWrapper.css('height', defaultWrapperHeight + 'px');\n      }\n\n      if ($('.quicktabs-wrapper').length > 0) {\n        $('li[id^=\"quicktabs-tab-latest_resources_by_type_tabs-\"] a').on('click', function() {\n          activeCardSlider();\n        });\n      }\n\n      function activeTabSlider(target) {\n        const currentSwiper = target.find('.swiper-container');\n        let itemsPerView = target.find('.card-carousel-items').text().trim();\n        let tabSwiperCards = [];\n        let activeTabText = $('.quicktabs-tabs').find('li.active a').text().toLowerCase();\n        target.addClass('card-carousel-init');\n        currentSwiper.addClass('cards-' + activeTabText);\n        currentSwiper.closest('.cards_container').find('.swiper-button-prev').addClass('tab-card-button-prevCard-' + activeTabText);\n        currentSwiper.closest('.cards_container').find('.swiper-button-next').addClass('tab-card-button-nextCard-' + activeTabText);\n        currentSwiper.closest('.cards_container').find('.swiper-scrollbar').addClass('tab-swiper-scrollbar');\n        tabSwiperCards[activeTabText] = new Swiper('.cards-' + activeTabText, {\n          on: {\n            slideChange: function() {\n              if (target.closest('.quicktabs-tabpage').length) {\n                setsliderdefaultheight(target);\n              }\n            }\n          },\n          slidesPerView: 4,\n          spaceBetween: 32,\n          slidesPerGroup: 1,\n          freeMode: true,\n          simulateTouch: true,\n          grabCursor: true,\n          breakpoints: {\n            10: {\n              slidesPerView: (itemsPerView < 2) ? 1 : 1.33,\n            },\n            576: {\n              slidesPerView: (itemsPerView < 3) ? 2 : 2.33,\n            },\n            768: {\n              slidesPerView: (itemsPerView < 4) ? 3 : 3.33,\n            },\n            1024: {\n              slidesPerView: (itemsPerView < 5) ? 4 : 4.33,\n            }\n          },\n          navigation: {\n            nextEl: '.tab-card-button-nextCard-' + activeTabText,\n            prevEl: '.tab-card-button-prevCard-' + activeTabText\n          },\n          scrollbar: {\n            el: '.tab-swiper-scrollbar',\n            draggable: true\n          }\n        });\n        $(window).on('resize', function() {\n          tabSwiperCards[activeTabText].update();\n        });\n      }\n\n      function activeCardSlider() {\n        if ($('.hq-carousel-global-card:visible').length > 0) {\n          $('.hq-carousel-global-card:visible').each(function(index, element) {\n            let target = $(this);\n            const currentSwiper = target.find('.swiper-container');\n            let itemsPerView = target.find('.card-carousel-items').text().trim();\n            let setItemPerView = parseInt(target.find('.field--name-field-items-per-view').text().trim());\n            let caroselSlide = 4;\n            if (!isNaN(setItemPerView)) {\n              let totalItems = itemsPerView;;\n              if (totalItems <= setItemPerView) {\n                caroselSlide = setItemPerView; // Show exact slides if totalItems <= itemsPerView\n              } else {\n                // Determine the number of slides to show in the carousel.\n                // If `setItemPerView` is 2, 3, or 4 and `totalItems` exceeds that value,\n                // slightly increase the number of slides to allow partial visibility of the next item.\n                // Otherwise, use the default `setItemPerView` value.\n                caroselSlide = (setItemPerView === 2 && totalItems > 2) ? 2.33 :\n                  (setItemPerView === 3 && totalItems > 3) ? 3.33 :\n                  (setItemPerView === 4 && totalItems > 4) ? 4.33 :\n                  setItemPerView;\n              }\n            }\n            else if (itemsPerView > 4) {\n              caroselSlide = 4.33;\n            }\n            let caroselSlideNexttablet = 3.33;\n            let caroselSlideNext = 4.33;\n            let globalSwiperCards = [];\n            if ($(this).find('.card-carousel-slide').length) {\n              caroselSlide = 3;\n              caroselSlideNexttablet = 2.33;\n              if (itemsPerView > 3) {\n                caroselSlide = 3.33;\n              }\n            }\n            \n            if (target.hasClass('card-carousel-init')) {\n              return;\n            } else if(target.closest('.quicktabs-main').length) {\n              activeTabSlider(target);\n            } else {\n              if (target.closest('.quicktabs-tabpage').length <= 0) {\n                target.find('.global-card__wrapper.default.vm').closest('.views-row').remove();\n              }\n              target.addClass('card-carousel-init');\n              currentSwiper.addClass('cards-' + index);\n              currentSwiper.closest('.cards_container').find('.swiper-button-prev').addClass('card-button-prevCard-' + index);\n              currentSwiper.closest('.cards_container').find('.swiper-button-next').addClass('card-button-nextCard-' + index);\n              currentSwiper.closest('.cards_container').find('.swiper-scrollbar').addClass('card-swiper-scrollbar');\n              globalSwiperCards[index] = new Swiper('.cards-' + index, {\n                slidesPerView: 4,\n                spaceBetween: 32,\n                slidesPerGroup: 1,\n                freeMode: true,\n                simulateTouch: true,\n                grabCursor: true,\n                breakpoints: {\n                  10: {\n                    slidesPerView: (itemsPerView < 2) ? 1 : 1.33,\n                  },\n                  576: {\n                    slidesPerView: (itemsPerView < 3) ? 2 : 2.33,\n                  },\n                  768: {\n                    slidesPerView: (itemsPerView < 4) ? caroselSlideNexttablet : caroselSlideNexttablet,\n                  },\n                  1024: {\n                    slidesPerView: caroselSlide,\n                  }\n                },\n                navigation: {\n                  nextEl: '.card-button-nextCard-' + index,\n                  prevEl: '.card-button-prevCard-' + index\n                },\n                scrollbar: {\n                  el: '.card-swiper-scrollbar',\n                  draggable: true\n                }\n              });\n              $(window).on('resize', function() {\n                globalSwiperCards[index].update();\n              });\n            }\n          });\n        } // end if\n      } // end active card slider\n\n      activeCardSlider();\n    }\n  };\n})(jQuery, _, Drupal);\n"],"file":"../../components/globalCardsCarousel.js"}