{"version":3,"names":[],"mappings":"","sources":["components/topic-hierarchical.js"],"sourcesContent":["(function ($, Drupal, once) {\n  Drupal.behaviors.customAccordion = {\n    attach: function (context, settings) {\n      let activeLi = $('.block-topic-hierarchical__body.collapse .active', context);\n\n      activeLi.parentsUntil('.block-topic-hierarchical__body').addClass('li-active__tree-element');\n      activeLi.find('*').addClass('li-active__tree-element');\n\n      function attachAccordion(context) {\n        let customNav = $('.block-topic-hierarchical__body', context);\n        let activeNav = $('.block-topic-hierarchical__body li.active', context);\n        let navItems = $('.block-topic-hierarchical__body ul > li', context);\n\n        customNav.addClass(activeNav.length ? 'with-active' : 'without-active');\n\n        let accordionItems;\n\n        if (activeNav.length) {\n          accordionItems = once('custom-accordion', '.block-topic-hierarchical__body ul > li > ul', context);\n        } else {\n          accordionItems = once('custom-accordion', '.block-topic-hierarchical__body ul', context);\n        }\n\n        // Convert NodeList to jQuery object\n        $(accordionItems).each(function () {\n          let $accordion = $(this);\n          let $accordionItems = $accordion.children('li');\n\n          $accordion.addClass('accordion').find('ul').addClass('sub-menu');\n\n          $accordionItems.each(function () {\n            let $this = $(this);\n            if ($this.find('ul').length) {\n              let $link = $this.children('a');\n              $link.addClass('accordion-heading').prependTo($this);\n              $this.prepend('<span class=\"accordion-icon plus\" role=\"button\" tabindex=\"0\"></span>');\n            } else {\n              $this.addClass('no-child');\n            }\n          });\n        });\n\n        customNav.on('click keydown', '.accordion-icon', function (e) {\n          if (e.type === 'click' || (e.type === 'keydown' && (e.key === 'Enter' || e.key === ' '))) {\n            e.preventDefault();\n            let $icon = $(this);\n            let $heading = $icon.next('.accordion-heading');\n            let $collapse = $heading.next('.sub-menu');\n\n            $collapse.slideToggle();\n            $heading.parent().toggleClass('open');\n            $icon.toggleClass('plus minus');\n          }\n        });\n      }\n\n      attachAccordion(context);\n    }\n  };\n\n  Drupal.behaviors.bootstrapCollapseBehavior = {\n    attach: function (context, settings) {\n      // Close collapse when clicking outside\n      document.addEventListener('click', function (e) {\n        var collapses = document.querySelectorAll('.collapse.show');\n        collapses.forEach(function (collapse) {\n          if (!collapse.contains(e.target)) {\n            $(collapse).collapse('hide');\n          }\n        });\n      });\n\n      // Toggle accordion\n      var headers = document.querySelectorAll('.block-topic-hierarchical__header a');\n      headers.forEach(function (header) {\n        header.addEventListener('click', function () {\n          var parent = this.closest('.block-topic-hierarchical');\n          var body = parent.querySelector('.block-topic-hierarchical__body');\n          $(body).collapse('toggle');\n        });\n      });\n    }\n  };\n\n})(jQuery, Drupal, once);\n"],"file":"../../components/topic-hierarchical.js"}