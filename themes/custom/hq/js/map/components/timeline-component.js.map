{"version":3,"names":[],"mappings":"","sources":["components/timeline-component.js"],"sourcesContent":["(function ($, _, Drupal) {\n  Drupal.behaviors.timelineFilter = {\n    attach: _.once(function (context, settings) {\n      if ($('.timeline-filter').length) {\n        let isScrolling = false; // Flag for scroll event control\n\n        function setActiveState($element) {\n          $element.addClass('active'); // Set the element as active\n\n          // Activate the first associated month-text\n          var $firstMonth = $element.find('.month-text').first();\n          $('.month-text').removeClass('active');\n          $firstMonth.addClass('active');\n        }\n\n        // Set the first filter-year element to be active on page load\n        var $firstFilterYear = $('.filter-year').first();\n        setActiveState($firstFilterYear);\n\n\n        function scrollHandler(targetId) {\n          var targetElement = $('#' + targetId);\n          var animateValue = 0;\n\n          if(!targetElement.parent().hasClass('aos-animate')) {\n            animateValue = 100;\n          }\n          else {\n            animateValue = 0;\n          }\n\n          if (targetElement.length) {\n            isScrolling = true; // Set the flag before the scroll\n            $('html, body').animate(\n              { scrollTop: targetElement.offset().top - 270 - animateValue},\n              500,\n              function () {\n                isScrolling = false; // Reset the flag after the scroll\n              }\n            );\n          }\n        }\n\n        // Handle the click event for filter-year\n        $('.filter-year').on('click keydown', function (event) {\n          var $current = $(this);\n\n          if (event.type === 'click' || event.keyCode === 13) {\n            event.preventDefault();\n\n            var targetId = $current.find('.month-text').first().data('target');;\n            scrollHandler(targetId);\n          }\n        });\n\n        // Handle the click event for month-text\n        $('.month-text').on('click keydown', function (event) {\n          if (event.type === 'click' || event.keyCode === 13) {\n            event.stopPropagation();\n\n            $('.paragraph--section--timeline-component [data-aos]').css('transform', 'translateZ(0)');\n\n            var targetId = $(this).data('target');\n            scrollHandler(targetId);\n\n            $('.month-text').removeClass('active');\n            $(this).addClass('active');\n          }\n        });\n\n        // Utility function to check if an element is in the viewport\n        function isInViewport(element) {\n          var elementTop = element.offset().top - 324;\n          var elementBottom = elementTop + element.outerHeight();\n          var viewportTop = $(window).scrollTop();\n          var viewportBottom = viewportTop + $(window).height();\n\n          return elementBottom > viewportTop && elementTop < viewportBottom;\n        }\n\n        // Function to set the active class on the corresponding year and month\n        function setActiveClasses($targetItem) {\n          var targetId = $targetItem.attr('id');\n          var $monthText = $('.month-text[data-target=\"' + targetId + '\"]');\n          var $yearText = $monthText.closest('.filter-year').find('.year-text');\n\n          $('.month-text').removeClass('active');\n          $('.filter-year').removeClass('active');\n\n          $monthText.addClass('active');\n          $yearText.closest('.filter-year').addClass('active');\n        }\n\n        // Scroll event to handle active class updates\n        $(window).on('scroll', function () {\n          if (isScrolling) return;\n\n          $('.field__item .paragraph--type--timeline-component-item').each(function () {\n            var $targetItem = $(this);\n\n            if (isInViewport($targetItem)) {\n              setActiveClasses($targetItem);\n              return false;\n            }\n          });\n        });\n\n        // Initial check on page load\n        $(window).trigger('scroll');\n      }\n    }),\n  };\n})(jQuery, _, Drupal);\n"],"file":"../../components/timeline-component.js"}