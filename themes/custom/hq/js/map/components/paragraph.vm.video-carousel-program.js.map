{"version":3,"names":[],"mappings":"","sources":["components/paragraph.vm.video-carousel-program.js"],"sourcesContent":["(function ($, Drupal, once) {\n  Drupal.behaviors.videoCarouselProgram = {\n    attach: function (context) {\n      once('video-popup-close', 'body', context).forEach(() => {\n        $('body').on('click', function (e) {\n          if (\n            $(e.target).is('#video-popup-overlay') ||\n            $(e.target).hasClass('video-popup-close')\n          ) {\n            closeVideoPopup();\n          }\n        });\n      });\n\n      once('video-popup-esc', 'body', context).forEach(() => {\n        $(document).on('keydown.videoPopupEsc', function (e) {\n          if (e.key === 'Escape' || e.keyCode === 27) {\n            closeVideoPopup();\n          }\n        });\n      });\n\n      function getVideoSrc($iframe) {\n        if ($iframe.length === 0) return null;\n        return $iframe.data('src') || $iframe.attr('src');\n      }\n\n      function openVideoPopup(src) {\n        if (!src) return;\n        if (!src.includes('autoplay=1')) {\n          src += (src.includes('?') ? '&' : '?') + 'autoplay=1';\n        }\n        const iframe = `<iframe src=\"${src}\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen></iframe>`;\n        $('#video-popup-overlay .video-popup-content').html(iframe);\n        $('#video-popup-overlay').removeClass('hidden');\n      }\n\n      function closeVideoPopup() {\n        $('#video-popup-overlay .video-popup-content').empty();\n        $('#video-popup-overlay').addClass('hidden');\n      }\n\n      function bindVideoPopupTriggers($wrapper, videoSrc) {\n        const $poster = $wrapper.find('.video-poster');\n        const $playButton = $wrapper.find('.video-play-button');\n\n        if (!videoSrc) return;\n\n        $poster.off('click').on('click', function () {\n          openVideoPopup(videoSrc);\n        });\n\n        $playButton.off('click').on('click', function () {\n          openVideoPopup(videoSrc);\n        });\n      }\n\n      $('.paragraph--type--video-carousel.paragraph--view-mode--program .swiper-container', context).each(function () {\n        const $videoSwiperContainer = $(this);\n        const $wrapperList = $videoSwiperContainer.find('.video-wrapper');\n        if (!$wrapperList.length) return;\n\n        $wrapperList.each(function () {\n          const $wrapper = $(this);\n          const $iframe = $wrapper.find('.video-iframe, .embedded-social-video iframe');\n          const videoSrc = getVideoSrc($iframe);\n          bindVideoPopupTriggers($wrapper, videoSrc);\n        });\n\n        if (window.innerWidth <= 767.98 && !$videoSwiperContainer.data('initialized')) {\n          $videoSwiperContainer.data('initialized', true);\n\n          new Swiper($videoSwiperContainer[0], {\n            slidesPerView: 1.15,\n            spaceBetween: 32,\n            slidesPerGroup: 1,\n            simulateTouch: true,\n            grabCursor: true,\n            freeMode: false,\n            watchSlidesProgress: true,\n          });\n        }\n      });\n\n      once('standalone-video-play', '.video-crousel__content .video-wrapper', context).forEach((wrapper) => {\n        const $wrapper = $(wrapper);\n        const $iframe = $wrapper.find('.video-iframe, .embedded-social-video iframe');\n        const videoSrc = getVideoSrc($iframe);\n        bindVideoPopupTriggers($wrapper, videoSrc);\n      });\n    }\n  };\n})(jQuery, Drupal, once);\n"],"file":"../../components/paragraph.vm.video-carousel-program.js"}