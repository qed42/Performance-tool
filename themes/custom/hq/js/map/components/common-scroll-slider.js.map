{"version":3,"names":[],"mappings":"","sources":["components/common-scroll-slider.js"],"sourcesContent":["(function ($, _, Drupal) {\n\n  window.Drupal.commonSlider = Drupal.commonSlider || {};\n\n  window.Drupal.commonSlider = function (sliderWrapper, paragraphPhotoSlide, paragraphVerticalSwiper) {\n\n    function getScrollbarWidth() {\n      const scrollDiv = document.createElement(\"div\");\n      scrollDiv.style.width = \"100px\";\n      scrollDiv.style.height = \"100px\";\n      scrollDiv.style.overflow = \"scroll\";\n      scrollDiv.style.position = \"absolute\";\n      scrollDiv.style.top = \"-9999px\";\n\n      document.body.appendChild(scrollDiv);\n      const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n      document.body.removeChild(scrollDiv);\n\n      return scrollbarWidth;\n    }\n\n    let scrollbarWidth = getScrollbarWidth();\n\n    let $sliderWrapper = sliderWrapper,\n      stickyClass = 'is-sticky',\n      onceClass = 'swiper-once',\n      isScrollLocked = false,\n      passed = false,\n      isWheelBlocked = false; // Flag to block multiple wheel events\n\n    function toggleScrolling(lock) {\n      $('body').css({\n        'overflow': lock ? 'hidden' : 'auto',\n        'padding-right': lock ? scrollbarWidth : 0\n      });\n    }\n\n    function checkScrollPosition() {\n      let scrollTop = $(window).scrollTop(),\n        targetOffset = $sliderWrapper.offset().top;\n\n      if (scrollTop === 0) {\n        $sliderWrapper.removeClass(`${onceClass} ${stickyClass}`);\n        isScrollLocked = false;\n        toggleScrolling(false);\n      } else if (scrollTop >= targetOffset && !isScrollLocked) {\n        requestAnimationFrame(() => {\n          isScrollLocked = true;\n          toggleScrolling(true);\n          $sliderWrapper.addClass(stickyClass);\n          $(window).scrollTop(targetOffset);\n        });\n      } else if (scrollTop < targetOffset && $sliderWrapper.hasClass(onceClass)) {\n        requestAnimationFrame(() => {\n          isScrollLocked = false;\n          $sliderWrapper.addClass(stickyClass);\n          toggleScrolling(true);\n          $(window).scrollTop(targetOffset);\n        });\n      }\n      lastScrollY = scrollTop;\n    }\n\n    $(document).ready(function () {\n      $('html, body').animate({ scrollTop: 0 }, 200);\n    });\n\n    let lastScrollY = 0;\n    $(window).on(\"scroll\", function () {\n      checkScrollPosition();\n    });\n\n    $sliderWrapper.on('wheel', function (e) {\n      if (!$sliderWrapper.hasClass(stickyClass)) {\n         return; // Prevent multiple wheel events\n      }\n\n      if (isWheelBlocked) {\n         return; // Prevent multiple wheel events\n      }\n\n      e.preventDefault(); // Prevent default scroll behavior\n      // Block the wheel event temporarily for 500ms\n      isWheelBlocked = true;\n\n      requestAnimationFrame(() => {\n        if (e.originalEvent.deltaY > 0) { // Scroll down\n          if (paragraphPhotoSlide.activeIndex < paragraphPhotoSlide.slides.length - 2) {\n            paragraphPhotoSlide.slideNext();\n            if (paragraphVerticalSwiper) paragraphVerticalSwiper.slideNext();\n            setTimeout(function () {\n              $sliderWrapper.addClass(onceClass);\n            }, 500);\n            \n          } else {\n            $sliderWrapper.removeClass(stickyClass);\n            toggleScrolling(false);\n            isScrollLocked = true;\n          }\n        } else { // Scroll up\n          if ($sliderWrapper.hasClass(onceClass)) {\n            paragraphPhotoSlide.slidePrev();\n            if (paragraphVerticalSwiper) paragraphVerticalSwiper.slidePrev();\n\n            if (paragraphPhotoSlide.activeIndex <= 1) {\n              setTimeout(function () {\n                $sliderWrapper.removeClass(`${onceClass} ${stickyClass}`);\n                isScrollLocked = false;\n                toggleScrolling(false);\n              }, 500);\n            }\n          }\n        }\n      });\n\n      // Release the wheel block after 1200ms\n      setTimeout(function () {\n        isWheelBlocked = false;\n      },1200);\n    });\n  };\n\n})(jQuery, _, Drupal);\n"],"file":"../../components/common-scroll-slider.js"}